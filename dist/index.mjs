var d=class{constructor(e,i){this.mouseOnThumb=!1;var n;this.container=e,this.options=i,this.element=document.createElement("div"),this.element.classList.add("scrollbar-thumb"),this.element.style.position="absolute",this.element.style.top="0",this.element.style.width="8px",this.element.style.backgroundColor="#999",this.element.style.borderRadius=`${(n=this.options)==null?void 0:n.borderRadius}px`,this.init()}init(){}getElement(){return this.element}getContainer(){return this.container}getMouseOnThumb(){return this.mouseOnThumb}setHeight(e){this.element.style.height=`${e}px`}setPosition(e){this.element.style.top=`${e}px`}show(){}hide(){}},T=d;var c=class{constructor(e,i){this.mouseOnTrack=!1;this.container=e,this.options=i,this.thumb=new T(e,i),this.init()}init(){var e;this.element=document.createElement("div"),this.element.classList.add("scrollbar-track"),this.element.style.position="absolute",this.element.style.top="0",this.element.style.right="0",this.element.style.bottom="0",this.element.style.width="8px",this.element.style.height="100%",this.element.style.borderRadius=`${(e=this.options)==null?void 0:e.borderRadius}px`,this.element.style.backgroundColor="rgba(255, 255, 255, 0.2)",this.element.appendChild(this.thumb.getElement()),this.container===document.body?this.thumb.setHeight(window.innerHeight/document.body.scrollHeight*window.innerHeight):this.thumb.setHeight(this.container.clientHeight/this.container.scrollHeight*this.container.clientHeight)}getElement(){return this.element}getThumb(){return this.thumb}getContainer(){return this.container}getMouseOnTrack(){return this.mouseOnTrack}addEventListener(){}show(){}hide(){}},u=c;var f=(i=>(i[i.VERTICAL=0]="VERTICAL",i[i.HORIZONTAL=1]="HORIZONTAL",i))(f||{}),h=f;var r=!1;function H(t){let e=t.getContainer(),i=t.getTrack().getElement(),n=t.getTrack().getThumb().getElement(),v=0,m=!1;e===document.body&&(e=document.body),t.getTrack().getElement().addEventListener("mousedown",o=>{if(m)return;o.preventDefault();let l=t.getTrack().getElement().getBoundingClientRect(),s=o.clientY-l.top-n.offsetHeight/2;s=Math.max(0,Math.min(s,l.height-n.offsetHeight)),n.style.top=`${s}px`;let a=s/(l.height-n.offsetHeight);e.scrollTop=a*(e.scrollHeight-e.clientHeight),b(o)}),t.getElement().addEventListener("mouseover",()=>{t.show()}),t.getElement().addEventListener("mouseleave",()=>{r||t.hide()}),n.addEventListener("mouseenter",()=>m=!0),n.addEventListener("mouseleave",()=>m=!1),n.addEventListener("mousedown",b);function b(o){o.preventDefault(),r=!0,v=o.clientY-t.getTrack().getElement().getBoundingClientRect().top-t.getTrack().getThumb().getElement().offsetTop,document.addEventListener("mousemove",E),document.addEventListener("mouseup",y)}function E(o){o.preventDefault();let l=t.getTrack().getElement().getBoundingClientRect(),s=o.clientY-l.top-v;s=Math.max(0,Math.min(s,l.height-t.getTrack().getThumb().getElement().offsetHeight)),t.getTrack().getThumb().setPosition(s);let a=s/(l.height-t.getTrack().getThumb().getElement().offsetHeight);e===document.body?window.scrollTo(0,a*(document.body.scrollHeight-window.innerHeight)):e.scrollTop=a*(e.scrollHeight-e.clientHeight)}function y(o){o.preventDefault(),r=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",y),m||t.hide()}}function L(t,e){t===document.body?(window.addEventListener("scroll",()=>{if(r)return;let i=window.scrollY/(document.body.scrollHeight-window.innerHeight);e.syncScrollbar(i),e.show()}),window.addEventListener("scrollend",()=>{r||e.hide()})):(t.addEventListener("scroll",()=>{if(r)return;let i=t.scrollTop/(t.scrollHeight-t.clientHeight);e.syncScrollbar(i),e.show()}),t.addEventListener("scrollend",()=>{r||e.hide()}))}var p=class{constructor(e,i,n=h.VERTICAL){this.options=i,e!==document.body?(this.container=e,this.direction=n,this.track=new u(e,this.options),this.createScrollbar("absolute")):(this.container=document.body,this.direction=n,this.track=new u(e,this.options),this.createScrollbar("absolute"),this.createScrollbar("fixed")),this.addEventListener(),this.init()}init(){H(this),setTimeout(()=>{this.track.getThumb().getMouseOnThumb()||this.hide()},1e3)}getElement(){return this.element}getContainer(){return this.container}getDirection(){return this.direction}getTrack(){return this.track}createScrollbar(e){this.element=document.createElement("div"),this.element.classList.add("scrollbar"),this.element.style.position=e,this.element.style.right="0",this.element.style.top="0",this.element.style.height="100%",this.element.style.width="10px",this.element.style.transition="opacity 0.5s ease-in-out",this.element.style.zIndex="999",this.element.appendChild(this.track.getElement())}show(){this.element.style.opacity="1"}hide(){this.element.style.opacity="0"}addEventListener(){L(this.container,this)}syncScrollbar(e){this.track.getThumb().setPosition(e*(this.track.getElement().offsetHeight-this.track.getThumb().getElement().offsetHeight))}},g=p;var w=class{constructor(){this.options={scrollbarWidth:8,borderRadius:8,zIndex:999,theme:"light",minimizeOnBlur:!0,autoHide:!0,autoHideDelay:1e3,padding:0}}init(e,i){this.element=e,e?(this.element.style.position="relative",this.element.style.overflow="hidden",this.scrollableDiv=document.createElement("div"),this.scrollableDiv.classList.add("enchant-scrollable-content"),this.scrollableDiv.style.position="absolute",this.scrollableDiv.style.top="0",this.scrollableDiv.style.left="0",this.scrollableDiv.style.width="100%",this.scrollableDiv.style.height="100%",this.scrollableDiv.style.overflow="auto",this.scrollableDiv.innerHTML=this.element.innerHTML,this.element.innerHTML="",this.element.appendChild(this.scrollableDiv),this.scrollbar=new g(this.scrollableDiv,this.options,h.VERTICAL),this.element.appendChild(this.scrollbar.getElement())):(this.element=document.body,this.scrollbar=new g(this.element,this.options,h.VERTICAL),this.element.appendChild(this.scrollbar.getElement())),this.injectStyle()}getElement(){return this.element}getScrollableDiv(){return this.scrollableDiv}getScrollbar(){return this.scrollbar}injectStyle(){let e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.appendChild(document.createTextNode(`
          .enchant-scrollable-content::-webkit-scrollbar {
              display: none;
          }
          .enchant-scrollable-content {
              scrollbar-width: none;
            }
          `)),this.element===document.body&&i.appendChild(document.createTextNode(`
                ::-webkit-scrollbar {
                    display: none;
                }
                body {
                    scrollbar-width: none;
                }
            `)),e.appendChild(i)}};export{w as EnchantScrollbar};
